<html>

	<head>
		<meta charset="utf-8">
		<script src="js/notes.js" type="text/javascript"></script>
		<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="js/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
		<script src="js/jquery-mousewheel-3.0.6/jquery.mousewheel.min.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="css/style.css">
	</head>

	<script>
		var theta = 10;
		var new_note_text = "edit me!";
		var floater = false;

		function page_scroll_avoid(){
			$('body').css('overflow', 'hidden');
      		$(window).scroll(function(){
        		$(this).scrollTop(top).scrollLeft(left);
      		});
		}
		function page_scroll_allow(){
			$('body').css('overflow', 'auto');
      		$(window).unbind('scroll');
		}

		function context_show(note){
			$(note).children('span.delete_icon').show();
		}

		function context_hide(note){
			$(note).children('span.delete_icon').hide();
			
		}

		function create_note(){
			var div = $(document.createElement('div')).addClass('note ui-draggable');
        	var span = $(document.createElement('span')).addClass('text');
        	var input = $(document.createElement('input'));
        	var delete_icon = $(document.createElement('span')).addClass('delete_icon');
        	$(input).attr('size', '10');
        	$(input).attr('value', new_note_text);
        	$(span).append(input);
        	$(div).append(span);
        	$(div).append(delete_icon);
        	return div;
		}

		function note_binding(note){
			$(note).data('angle' , 0);
			$(note).draggable({ containment: ".canvas", scroll: false });
			$(note).children('span.delete_icon').click(function(){
				$(note).remove();
			});
			$(note).bind('mousewheel', function(event, delta) {
            	var old = $(this).data('angle');
            	$(this).data('angle', old + theta*delta*(-1));
            	$(this).css('-moz-transform', 'rotate('+ $(this).data('angle') +'deg)');
            	$(this).css('-webkit-transform', 'rotate('+ $(this).data('angle') +'deg)');
        	});
        	$(note).mouseover(function(){
        		page_scroll_avoid();
        		context_show($(this));
        	});
        	$(note).mouseout(function(){
        		page_scroll_allow();
        		context_hide($(this));
        	});
		}

		$(function() {
			note_binding('.note');
        	$('.canvas').dblclick(function(){ 
        		var div = create_note();
        		$(this).append(div);
        		note_binding(div);
        		});
		});

	</script>	


	<body>
		<h1>Post-It App</h1>
		<div class="canvas">
			
			<!-- BEGIN Note -->
			<div class="note">
				
				<span class="text">
					<input type="text" size="10" value="Some idea">
				</span>

				<span class="delete_icon"></span>
			</div>
			<!--- END Note -->

		</div>
		<div class="instructions">
			<ul>
				<li>Drag-and-Drop notes</li>
				<li>Double click the canvas for a new note</li>
				<li>Activate the mouse wheel over a note to rotate it</li>
				<li>Click a note in the center for editing</li>
			</ul>
		</div>
	</body>
</html>


	

	

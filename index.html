<html>

	<head>
		<meta charset="utf-8">
		<script src="js/notes.js" type="text/javascript"></script>
		<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="js/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
		<script src="js/jquery-mousewheel-3.0.6/jquery.mousewheel.min.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="css/style.css">
	</head>

	<script>
		var theta = 10;
		var new_note_text = "edit me!";

		function create_note(){
			var div = $(document.createElement('div'));
        	var span = $(document.createElement('span'));
        	var input = $(document.createElement('input'));
        	$(div).addClass('note ui-draggable');
        	$(span).addClass('text');
        	$(input).attr('size', '10');
        	$(input).attr('value', new_note_text);
        	$(span).append(input);
        	$(div).append(span);
        	return div;
		}

		function note_binding(note){
			$(note).data('angle' , 0);
			$(note).draggable({ containment: ".canvas", scroll: false });
			$(note).bind('mousewheel', function(event, delta) {
            	var old = $(this).data('angle');
            	$(this).data('angle', old + theta*delta*(-1));
            	$(this).css('-moz-transform', 'rotate('+ $(this).data('angle') +'deg)');
            	$(this).css('-webkit-transform', 'rotate('+ $(this).data('angle') +'deg)');
        	});
		}

		$(function() {
			note_binding('.note');
        	$('.canvas').dblclick(function(){ 
        		var div = create_note();
        		$(this).append(div);
        		note_binding(div);
        		});
		});

	</script>	


	<body>
		<h1>Post-It App</h1>

		<div class="canvas">
			<div class="note">
				<span class="text"><input type="text" size="10" value="Some idea"></span>
			</div>
		</div>
	</body>
</html>


	

	
